{"ast":null,"code":"import _slicedToArray from\"/home/abhishek/learn/InstagramClone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePic(_ref){var changeprofile=_ref.changeprofile;var hiddenFileInput=useRef(null);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var handleClick=function handleClick(){hiddenFileInput.current.click();};useEffect(function(){if(image){postDetails();}},[image]);useEffect(function(){if(url){postPic();}},[url]);var postPic=function postPic(){fetch(\"/uploadProfilePic\",{method:\"put\",headers:{\"Content-type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({pic:url})}).then(function(res){return res.json();}).then(function(data){// console.log(data);\nchangeprofile();window.location.reload();}).catch(function(err){return console.log(err);});};var postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"socialmediaclone\");data.append(\"cloud_name\",\"abhi2313\");fetch(\"https://api.cloudinary.com/v1_1/abhi2313/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){return setUrl(data.url);}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"profilePic darkBg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"changePic centered\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Change Profile Photo\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid black\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",style:{color:\"blue\"},onClick:handleClick,children:\"Upload photo\"}),/*#__PURE__*/_jsx(\"input\",{ref:hiddenFileInput,type:\"file\",name:\"\",id:\"\",accept:\"image/*\",style:{display:\"none\"},onChange:function onChange(e){setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:\"1px solid black\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",onClick:function onClick(){setUrl(null);postPic();},style:{color:\"red\"},children:\"Remove current photo\"})}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:\"1px solid black\"},children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"none\",border:\"none\",cursor:\"pointer\",fontSize:\"15px\"},onClick:changeprofile,children:\"Cancel\"})})]})});}export default ProfilePic;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","ProfilePic","_ref","changeprofile","hiddenFileInput","_useState","_useState2","_slicedToArray","image","setImage","_useState3","_useState4","url","setUrl","handleClick","current","click","postDetails","postPic","fetch","method","headers","localStorage","getItem","body","JSON","stringify","pic","then","res","json","data","window","location","reload","catch","err","console","log","FormData","append","className","children","style","borderTop","color","onClick","ref","type","name","id","accept","display","onChange","e","target","files","background","border","cursor","fontSize"],"sources":["/home/abhishek/learn/InstagramClone/backend/frontend/src/components/ProfilePic.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\n\nfunction ProfilePic({ changeprofile }) {\n    const hiddenFileInput = useRef(null)\n    const [image, setImage] = useState('')\n    const [url, setUrl] = useState('')\n\n    const handleClick = () => {\n\n        hiddenFileInput.current.click()\n\n    }\n\n    useEffect(() => {\n        if (image) {\n            postDetails()\n\n        }\n\n\n\n    }, [image])\n\n    useEffect(() => {\n        if (url) {\n            postPic()\n        }\n\n    }, [url])\n\n    const postPic = () => {\n\n        fetch(\"/uploadProfilePic\", {\n            method: \"put\",\n            headers:\n            {\n                \"Content-type\": \"application/json\",\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n            },\n            body: JSON.stringify({\n\n                pic: url,\n\n            })\n        })\n            .then(res => res.json())\n            .then(data => {\n                // console.log(data);\n                changeprofile()\n                window.location.reload()\n\n            })\n            .catch(err => console.log(err))\n\n\n    }\n\n\n    const postDetails = () => {\n        const data = new FormData()\n        data.append(\"file\", image)\n        data.append(\"upload_preset\", \"socialmediaclone\")\n        data.append(\"cloud_name\", \"abhi2313\")\n        fetch(\"https://api.cloudinary.com/v1_1/abhi2313/image/upload\", {\n            method: \"post\",\n            body: data\n        })\n            .then((res) => res.json())\n            .then((data) => setUrl(data.url))\n            .catch(err => console.log(err))\n    }\n    return (\n        <div className='profilePic darkBg'>\n            <div className=\"changePic centered\">\n                <div>\n                    <h2>\n                        Change Profile Photo\n                    </h2>\n                </div>\n                <div style={{ borderTop: \"1px solid black\" }}>\n                    <button className='upload-btn' style={{ color: \"blue\" }} onClick={handleClick}>Upload photo</button>\n                    <input ref={hiddenFileInput} type=\"file\" name=\"\" id=\"\" accept='image/*' style={{ display: \"none\" }} onChange={(e) => { setImage(e.target.files[0]) }} />\n                </div>\n                <div style={{ borderTop: \"1px solid black\" }}>\n                    <button className='upload-btn' onClick={()=>{\n                        setUrl(null)\n                        postPic()\n                    }} style={{ color: \"red\" }}>\n                        Remove current photo\n                    </button>\n                </div>\n                <div style={{ borderTop: \"1px solid black\" }}>\n                    <button style={{ background: \"none\", border: \"none\", cursor: \"pointer\", fontSize: \"15px\" }}\n                        onClick={changeprofile}>\n                        Cancel\n                    </button>\n                </div>\n\n            </div>\n\n\n        </div>\n    )\n}\n\nexport default ProfilePic\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}