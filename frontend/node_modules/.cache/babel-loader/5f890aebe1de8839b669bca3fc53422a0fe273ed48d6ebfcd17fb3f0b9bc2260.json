{"ast":null,"code":"import _slicedToArray from\"/home/abhishek/learn/InstagramClone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../css/CreatePost.css';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreatePost(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),body=_useState2[0],setBody=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setUrl=_useState6[1];var notifyA=function notifyA(msg){toast.error(msg);};var notifyB=function notifyB(msg){toast.success(msg);};useEffect(function(){if(url){fetch(\"/createPost\",{method:\"post\",headers:{\"Content-type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){notifyA(data.error);}else{notifyB(\"Successfully Posted\");navigate('/');}}).catch(function(err){return console.log(err);});}},[url]);var postDetails=function postDetails(){// console.log(body,image);\nvar data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"socialmediaclone\");data.append(\"cloud_name\",\"abhi2313\");fetch(\"https://api.cloudinary.com/v1_1/abhi2313/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){return setUrl(data.url);}).catch(function(err){return console.log(err);});};var loadfile=function loadfile(event){var output=document.getElementById('output');output.src=URL.createObjectURL(event.target.files[0]);output.onload=function(){URL.revokeObjectURL(output.src);};};return/*#__PURE__*/_jsxs(\"div\",{className:\"createP\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Create new Post\"}),/*#__PURE__*/_jsx(\"button\",{id:\"post-btn\",onClick:postDetails,children:\"Share\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-div\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAMAAAC93eDPAAAAY1BMVEX///8AAABWVlYbGxvIyMji4uLPz8/Y2Njd3d3Ly8vU1NRqamr8/PyGhoaYmJhaWlr29vY7Ozt4eHgqKirt7e2fn5+mpqaysrLBwcEvLy8kJCR+fn5ycnKPj49LS0tCQkIODg6tztHVAAAC70lEQVR4nO3b6XqiMBQGYCKLqGxaZNFqvf+r7ExnwpKcAFk48jw930+l6SuYkBOi51EoFAqFQqFoZJ/lO4Tk2V4BSD4ZWj4TSFCc8QSMnQuAcMIUMHaSBRGugLFIIqTYhFQifGATPiSCj03w1QQ/bYLV0qT+PMFXDRuOcvRnCdd1BZ6XzRLCtQnB+wkHIvw+QhlU1yqQ7ohohKTm9/5d/R5C0w6G4vb4BkLGxhmeCByCKGCsQibUkoCxAJUQ3gBC/w8xCA9AMLgUGARQwJ582o5AaGBC13C0PkHuDv/COyYC4aIg8BkzAkFVFt5/FUFVE/FJKQKhUhB4AYdAKGHBi08cEAheDhK6EvKIQDiAhBKTAPaJR/euE0IY7cF1Gp7kKQkGCxoOCNHOZ6+2mjqk/BIFg0msPYHPR9KpE1GMV41Gx1oT9n27k8cF/cXYHUbv2BLiwUrItMELs0ue55esFF63JBSjL9rsOkCSAFfLkiAsDNZTx6piR5DuQCYGKwIwOW9wCeDiqP7KlAWhhMoD5msP6OaERLE2etM1mBOUTwrOYsf/c8JiaJ3dlqCamv81iIB7y77U9xA+vuoSoEq1Sz469H9JeQfbMSfMPCnIB4NgV0ypxm8zQvmaJrBLd+i1f1ExfhsRit2MoJ8UjUop+PtgRFCVaMP8XPpSsILjtwkBXi8Q46eV3G8PUmNGBFWxvijyAygDQmwjYK/YnlDaPrOSxk5dAjAf18xNNOgSlnSGmTwFA7+yCwmqKlkr+XgCqUew6gx9nuaEo69qVDOj5/Q6hNLdo/zUkCAWhjZ5GBEcdAbQsJzgpDMMUmsTAlVTxmk0CaFzQWdYSCjAmsE2kQYhWWlfS7icsGySop+fW9YiwlXVhBMD/5pNEdx3hj5tsYQwO2O3yjOZJ8Qux2Ugp3lCq/pbV+EfcWJHD1aIQAQiEIEIRFhO2MD22w1sQt7AVuwNbEjfwrZ8L3FbS08G/nGCt4GfaFAoFAqFQqGA+QauCTOfkC7jXwAAAABJRU5ErkJggg==\",alt:\"\",id:\"output\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:function onChange(event){loadfile(event);setImage(event.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:JSON.parse(localStorage.getItem('user')).Photo?JSON.parse(localStorage.getItem('user')).Photo:picLink})}),/*#__PURE__*/_jsx(\"h5\",{children:JSON.parse(localStorage.getItem('user')).name})]}),/*#__PURE__*/_jsx(\"textarea\",{value:body,onChange:function onChange(e){setBody(e.target.value);},type:\"text\",placeholder:\"write a caption .....\"})]})]});}// export default CreatePost","map":{"version":3,"names":["React","useState","useEffect","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","CreatePost","picLink","navigate","_useState","_useState2","_slicedToArray","body","setBody","_useState3","_useState4","image","setImage","_useState5","_useState6","url","setUrl","notifyA","msg","error","notifyB","success","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","catch","err","console","log","postDetails","FormData","append","loadfile","event","output","document","getElementById","src","URL","createObjectURL","target","files","onload","revokeObjectURL","className","children","id","onClick","alt","type","accept","onChange","parse","Photo","name","value","e","placeholder"],"sources":["/home/abhishek/learn/InstagramClone/backend/frontend/src/screens/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport '../css/CreatePost.css'\nimport { toast } from 'react-toastify'\nimport {useNavigate} from 'react-router-dom'\n\nexport default function CreatePost() {\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"\n\n  const navigate=useNavigate()\n  const [body, setBody] = useState('')\n  const [image, setImage] = useState('')\n  const [url, setUrl] = useState('')\n\n  const notifyA = (msg) => {\n    toast.error(msg)\n\n  }\n  const notifyB = (msg) => {\n    toast.success(msg)\n  }\n\n\n  useEffect(() => {\n    if (url) {\n      fetch(\"/createPost\", {\n        method: \"post\",\n        headers:\n        {\n          \"Content-type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          body,\n          pic: url,\n\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          if(data.error)\n          {\n            notifyA(data.error)\n          }\n          else\n          {\n            notifyB(\"Successfully Posted\")\n            navigate('/')\n\n          }\n        })\n        .catch(err => console.log(err))\n    }\n\n\n  }, [url])\n\n\n\n  const postDetails = () => {\n    // console.log(body,image);\n    const data = new FormData()\n    data.append(\"file\", image)\n    data.append(\"upload_preset\", \"socialmediaclone\")\n    data.append(\"cloud_name\", \"abhi2313\")\n    fetch(\"https://api.cloudinary.com/v1_1/abhi2313/image/upload\", {\n      method: \"post\",\n      body: data\n    })\n      .then((res) => res.json())\n      .then((data) => setUrl(data.url))\n      .catch(err => console.log(err))\n  }\n\n\n\n  const loadfile = (event) => {\n    var output = document.getElementById('output');\n    output.src = URL.createObjectURL(event.target.files[0]);\n    output.onload = function () {\n      URL.revokeObjectURL(output.src)\n    }\n  }\n  return (\n    <div className='createP'>\n      <div className=\"post-header\">\n        <h4>Create new Post</h4>\n\n        <button id=\"post-btn\" onClick={postDetails}>Share</button>\n      </div>\n      <div className=\"main-div\">\n        <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAMAAAC93eDPAAAAY1BMVEX///8AAABWVlYbGxvIyMji4uLPz8/Y2Njd3d3Ly8vU1NRqamr8/PyGhoaYmJhaWlr29vY7Ozt4eHgqKirt7e2fn5+mpqaysrLBwcEvLy8kJCR+fn5ycnKPj49LS0tCQkIODg6tztHVAAAC70lEQVR4nO3b6XqiMBQGYCKLqGxaZNFqvf+r7ExnwpKcAFk48jw930+l6SuYkBOi51EoFAqFQqFoZJ/lO4Tk2V4BSD4ZWj4TSFCc8QSMnQuAcMIUMHaSBRGugLFIIqTYhFQifGATPiSCj03w1QQ/bYLV0qT+PMFXDRuOcvRnCdd1BZ6XzRLCtQnB+wkHIvw+QhlU1yqQ7ohohKTm9/5d/R5C0w6G4vb4BkLGxhmeCByCKGCsQibUkoCxAJUQ3gBC/w8xCA9AMLgUGARQwJ582o5AaGBC13C0PkHuDv/COyYC4aIg8BkzAkFVFt5/FUFVE/FJKQKhUhB4AYdAKGHBi08cEAheDhK6EvKIQDiAhBKTAPaJR/euE0IY7cF1Gp7kKQkGCxoOCNHOZ6+2mjqk/BIFg0msPYHPR9KpE1GMV41Gx1oT9n27k8cF/cXYHUbv2BLiwUrItMELs0ue55esFF63JBSjL9rsOkCSAFfLkiAsDNZTx6piR5DuQCYGKwIwOW9wCeDiqP7KlAWhhMoD5msP6OaERLE2etM1mBOUTwrOYsf/c8JiaJ3dlqCamv81iIB7y77U9xA+vuoSoEq1Sz469H9JeQfbMSfMPCnIB4NgV0ypxm8zQvmaJrBLd+i1f1ExfhsRit2MoJ8UjUop+PtgRFCVaMP8XPpSsILjtwkBXi8Q46eV3G8PUmNGBFWxvijyAygDQmwjYK/YnlDaPrOSxk5dAjAf18xNNOgSlnSGmTwFA7+yCwmqKlkr+XgCqUew6gx9nuaEo69qVDOj5/Q6hNLdo/zUkCAWhjZ5GBEcdAbQsJzgpDMMUmsTAlVTxmk0CaFzQWdYSCjAmsE2kQYhWWlfS7icsGySop+fW9YiwlXVhBMD/5pNEdx3hj5tsYQwO2O3yjOZJ8Qux2Ugp3lCq/pbV+EfcWJHD1aIQAQiEIEIRFhO2MD22w1sQt7AVuwNbEjfwrZ8L3FbS08G/nGCt4GfaFAoFAqFQqGA+QauCTOfkC7jXwAAAABJRU5ErkJggg==\" alt=\"\" id='output' />\n        <input type=\"file\" accept='image/*' onChange={(event) => {\n          loadfile(event)\n          setImage(event.target.files[0])\n\n        }} />\n\n      </div>\n      <div className=\"details\">\n        <div className=\"card-header\">\n          <div className=\"card-pic\">\n            <img src={JSON.parse(localStorage.getItem('user')).Photo?JSON.parse(localStorage.getItem('user')).Photo:picLink}/>\n          </div>\n          <h5>{JSON.parse(localStorage.getItem('user')).name}</h5>\n        </div>\n        <textarea value={body}\n          onChange={(e) => { setBody(e.target.value) }}\n          type='text' placeholder='write a caption .....'></textarea>\n\n      </div>\n    </div>\n  )\n}\n\n// export default CreatePost"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}