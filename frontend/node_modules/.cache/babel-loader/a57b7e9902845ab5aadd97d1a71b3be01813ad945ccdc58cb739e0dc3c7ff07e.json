{"ast":null,"code":"import _slicedToArray from\"/home/abhishek/learn/InstagramClone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';// import PostDetail from './PostDetail'\nimport'../css/Profile.css';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserProfile=function UserProfile(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var _useParams=useParams(),userid=_useParams.userid;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// const [pics, setPics] = useState([])\n// const [show, setShow] = useState(false)\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isFollow=_useState6[0],setIsFollow=_useState6[1];// const [followers, setFollowers] = useState(0)\n// const [following, setFollowing] = useState(0)\nvar followUser=function followUser(userId){fetch('/follow',{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(data){setIsFollow(true);});};var unfollowUser=function unfollowUser(userId){fetch('/unfollow',{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(data){setIsFollow(false);});};useEffect(function(){fetch(\"/user/\".concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem('jwt')}}).then(function(res){return res.json();}).then(function(result){setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}});},[isFollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:function onClick(){if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" Posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following \"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto \"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(function(pic){return/*#__PURE__*/_jsx(\"img\",{src:pic.photo,className:\"item\"},pic._id);})})]});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","UserProfile","picLink","_useParams","userid","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","posts","setPosts","_useState5","_useState6","isFollow","setIsFollow","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","unfollowUser","concat","result","post","followers","includes","parse","_id","className","children","src","Photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","opacity","margin","map","pic","photo"],"sources":["/home/abhishek/learn/InstagramClone/backend/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\n// import PostDetail from './PostDetail'\nimport '../css/Profile.css'\nimport { useParams } from 'react-router-dom'\n\n\nconst UserProfile = () => {\n    var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"\n\n    const { userid } = useParams()\n    const [user, setUser] = useState(\"\")\n    // const [pics, setPics] = useState([])\n    // const [show, setShow] = useState(false)\n    const [posts, setPosts] = useState([])\n    const [isFollow, setIsFollow] = useState(false)\n    // const [followers, setFollowers] = useState(0)\n    // const [following, setFollowing] = useState(0)\n\n    const followUser = (userId) => {\n        fetch('/follow', {\n            method: \"put\",\n\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n            },\n            body: JSON.stringify({\n                followId: userId\n            })\n\n\n        })\n            .then((res) => res.json())\n            .then((data) => {\n                \n                setIsFollow(true)\n\n            })\n\n    }\n    const unfollowUser = (userId) => {\n        fetch('/unfollow', {\n            method: \"put\",\n\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n            },\n            body: JSON.stringify({\n                followId: userId\n            })\n\n\n        })\n            .then((res) => res.json())\n            .then((data) => {\n                setIsFollow(false)\n                \n\n\n            })\n\n    }\n\n\n\n\n    useEffect(() => {\n        \n\n\n        fetch(`/user/${userid}`, {\n            headers:\n            {\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\n            }\n\n        })\n            .then(res => res.json())\n            .then(result => {\n                setUser(result.user)\n               \n                setPosts(result.post)\n                if (result.user.followers.includes(\n                    JSON.parse(localStorage.getItem(\"user\"))._id\n                )) {\n\n                    setIsFollow(true)\n                }\n            })\n            \n       \n\n\n\n    }, [isFollow])\n    return (\n        <div className='profile'>\n            <div className=\"profile-frame\">\n                <div className=\"profile-pic\">\n                    <img src={user.Photo?user.Photo:picLink} alt=\"\" />\n                </div>\n                <div className=\"profile-data\">\n                    <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                        <h1>{user.name}</h1>\n                        <button className='followBtn' onClick={() => {\n\n                            if (isFollow) {\n                                unfollowUser(user._id)\n                            }\n                            else {\n                                followUser(user._id)\n                            }\n\n\n                        }}>\n                            {isFollow ? \"Unfollow\" : \"Follow\"}\n\n                        </button>\n                    </div>\n\n                    <div className=\"profile-info\">\n                        <p>{posts.length} Posts</p>\n                        <p>{user.followers ? user.followers.length : \"0\"} Followers</p>\n                        <p>{user.following ? user.following.length : \"0\"} following </p>\n\n\n                    </div>\n                </div>\n            </div>\n            <hr style={{ width: \"90%\", opacity: \"0.8\", margin: \"25px auto \" }} />\n            <div className=\"gallery\">\n                {\n                    posts.map((pic) => {\n                        return (\n                            <img src={pic.photo} key={pic._id} className='item'></img>\n                        )\n                    })\n\n                }\n\n\n            </div>\n\n           \n\n\n        </div>\n    )\n}\n\nexport default UserProfile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}